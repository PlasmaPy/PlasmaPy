name: Add comment

on:
  pull_request_target:
    types: [opened]

jobs:
  comment:
    name: Welcome message
    # Skip posting this comment for frequent contributors
    if: "!contains(fromJSON('[''namurphy'', ''rocco8773'', ''StanczakDominik'', ''dependabot'', ''plasmapy-requirements-bot'', ''pre-commit-ci'']'), github.event.pull_request.user.login)"
    runs-on: ubuntu-latest

    steps:

    - uses: actions/github-script@v7
      with:
        script: |
          github.rest.issues.createComment({
            issue_number: context.issue.number,
            owner: context.repo.owner,
            repo: context.repo.repo,
            body: `Thank you for submitting this pull request (PR)! âœ¨ PlasmaPy depends on contributors like you, so we deeply appreciate it!

            The bottom of this page shows several checks that are run for every PR. âœ… Don't worry if something broke! We break stuff all the time. ðŸ˜… Click on "Details" to learn why a check didn't pass. Please also feel free to ask for help. We do that all the time as well! ðŸŒ¸ We invite you to our weekly [**community meeting**](https://www.plasmapy.org/meetings/weekly) (2 pm ET on most Tuesdays) and [**office hours**](https://www.plasmapy.org/meetings/office_hours) (3 pm ET on most Thursdays).

            After this PR is marked as ready for review, someone should stop by to provide a code review and offer suggestions soon. ðŸ‘¥ If we don't provide a review within a few days, please feel free to send us a reminder. ðŸŽ—

            [**PlasmaPy's contributor guide**](https://docs.plasmapy.org/en/latest/contributing/index.html) has information on:

             - ðŸŒ± [Getting ready to contribute](https://docs.plasmapy.org/en/latest/contributing/getting_ready.html#getting-ready-to-contribute)
             - ðŸ”§ [Code contribution workflow](https://docs.plasmapy.org/en/latest/contributing/workflow.html#code-contribution-workflow)
             - ðŸ“œ [Adding a changelog entry](https://docs.plasmapy.org/en/latest/contributing/changelog_guide.html#adding-a-changelog-entry)
             - ðŸ’» [Coding tips and guidelines](https://docs.plasmapy.org/en/latest/contributing/coding_guide.html#coding-guide)
             - ðŸ“š [Writing documentation](https://docs.plasmapy.org/en/latest/contributing/doc_guide.html#writing-documentation)
             - ðŸ§ª [Writing tests](https://docs.plasmapy.org/en/latest/contributing/testing_guide.html#testing-guide)

            > [!TIP]
            > ðŸ“š For a documentation preview, click on **docs/readthedocs.org:plasmapy** in the list of checks below. For cryptic documentation errors, see the [documentation troubleshooting guide](https://docs.plasmapy.org/en/latest/contributing/doc_guide.html#troubleshooting).

            > [!TIP]
            > ðŸ§¹ Automatically fix most **pre-commit.ci** failures by commenting \`pre-commit.ci autofix\` below. For other failures, please see the [pre-commit troubleshooting guide](https://docs.plasmapy.org/en/stable/contributing/pre-commit.html#troubleshooting-pre-commit-failures).

            We thank you once again! ðŸŒŒ`
          })
